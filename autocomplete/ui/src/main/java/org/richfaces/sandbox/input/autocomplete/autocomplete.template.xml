<?xml version="1.0" encoding="UTF-8"?>

<cdk:root xmlns="http://jboss.org/schema/richfaces/cdk/xhtml-el"
          xmlns:cdk="http://jboss.org/schema/richfaces/cdk/core"
          xmlns:c="http://jboss.org/schema/richfaces/cdk/jstl/core"
          xmlns:cc="http://jboss.org/schema/richfaces/cdk/jsf/composite">

    <cc:interface>
        <cdk:class>org.richfaces.sandbox.input.AutocompleteRenderer</cdk:class>
        <cdk:superclass>org.richfaces.sandbox.input.autocomplete.AutocompleteRendererBase</cdk:superclass>
        <cdk:component-family>org.richfaces.sandbox.AutocompleteFamily</cdk:component-family>
        <cdk:renderer-type>org.richfaces.sandbox.AutocompleteRenderer</cdk:renderer-type>
        <cdk:component-base-class>org.richfaces.sandbox.input.autocomplete.AbstractAutocomplete</cdk:component-base-class>

        <cdk:resource-dependency library="font-awesome" name="font-awesome.css" />
        <cdk:resource-dependency library="org.richfaces" name="widgets/input/autocomplete.css" />
        
        <cdk:resource-dependency library="org.richfaces" name="ajax.reslib" />
        <cdk:resource-dependency library="com.jqueryui" name="jquery.ui.core.js" />
        <cdk:resource-dependency library="com.jqueryui" name="jquery.ui.widget.js" />
        <cdk:resource-dependency library="com.jqueryui" name="jquery.ui.position.js" />
        <cdk:resource-dependency library="com.jqueryui" name="jquery.ui.menu.js" />
        <cdk:resource-dependency library="com.jqueryui" name="jquery.ui.autocomplete.js" />
        <cdk:resource-dependency library="org.richfaces" name="widgets/input/autocomplete.js" />
        <cdk:resource-dependency library="org.richfaces" name="widgets/input/autocompleteBridge.js" />
        <cdk:resource-dependency library="org.richfaces" name="bridges/input/autocompleteJsfBridge.js" />
    </cc:interface>

    <cc:implementation>
        <div id="#{clientId}">
            <input id="#{clientId}Input" type="text"
                   value="#{getInputValue(facesContext, component)}"
                   cdk:passThroughWithExclusions=""
                   disabled="#{component.disabled}" />
            <cdk:renderFragment name="renderSuggestions" />
            <script>
                var options = {};
                $(document.getElementById('#{clientId}')).richAutocompleteJsfBridge(options);
            </script>
        </div>
    </cc:implementation>
    
    <cdk:fragment name="renderSuggestionsAsList">
        <cc:interface>
            <cc:attribute name="items" type="java.lang.Iterable" />
        </cc:interface>
        <cc:implementation>
            <ul id="#{clientId}Suggestions" style="display: none">
                <c:forEach var="item" items="#{items}">
                    <li>#{item}</li>
                </c:forEach>
            </ul>
        </cc:implementation>
    </cdk:fragment>
    
    <cdk:fragment name="renderSuggestions">
        <cc:implementation>
            <c:choose>
                <c:when test="#{component.layout == 'list'}">
                    <cdk:renderFragment name="renderSuggestionsAsList" items="#{getSuggestionsAsDataModel(facesContext, component)}" />
                </c:when>
            </c:choose>
        </cc:implementation>
    </cdk:fragment>

</cdk:root>